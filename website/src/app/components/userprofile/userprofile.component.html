<nav-root></nav-root>

<!-- Modal de las publicaciones -->
<div id="myModal1" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <!-- This element change with javascript -->
    <div id="filep" class="modal-content"></div>
  </div>
</div>
<!--  -->

<div id="Loading" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div style="text-align: center">
        <img class="fa-spin" src="https://image.flaticon.com/icons/svg/456/456129.svg" style="height: 50px; widows: 50px; ">
      <h5 style="margin-top: 2px; font-size: 25px; color: white; font-weight: bold; font-family: 'Pacifico', cursive;">Cargando...</h5>
      <button style="display: none" id="CloseButton" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
    </div>
  </div>
</div>

<!-- Modal info likes  -->
<div class="modal fade" id="modaLike" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <a class="navbar-brand d-flex  center mr-3" id="item" style="font-size: 15px; color: #DB3C3C; cursor: pointer;">
          <img class="d-flex align-self-start mr-3" src="https://image.flaticon.com/icons/svg/237/237645.svg" style="width: 22px;">
          <b style="margin-left: -10px">Me gustas</b>
        </a>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- <div style="color: gray">En este momento no tienes notificaciones</div> -->
        <a style="color: #2285E3">
          <i class="fa fa-info-circle" aria-hidden="true"></i>
          <b style="font-size: 13px">SocialFriends te da la bienvenida</b>
        </a>
        <br>
        <a style="color: #2285E3">
          <i class="fa fa-info-circle" aria-hidden="true"></i>
          <b style="font-size: 13px">Las notificaciones están en desarrollo</b>
        </a>
        <br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-sm-12 col-md-8 col-lg-8 col-xl-8">
      <div class="card">
        <div class="card-header">
          Publicaciones
        </div>

        <div class="container">
          <div *ngIf="listPublications?.length == 0" style="color: gray">
            <br>Aún no tienes publicaciones
            <br>
            <br>
          </div>
          <br>
          <div>
            <div class="card">

              <div *ngFor="let userPublication of listPublications; let i = index">
                <div class="card card-user" style="margin: 10px">

                  <div class="row" style="margin: 10 px; margin-top: 10px">
                    <div class="col-sm-12 col-md-3 col-lg-2 col-xl-2 col-lg-2 text-center">
                      <img class="d-flex align-self-center mr-3" src="{{user.avatar}}" class="rounded-circle" height="50" width="50" style="border: 2px solid #D8D8D8">
                    </div>
                    <div class="col-sm-12 col-md-9 col-lg-10 col-xl-10 col-lg-10">

                      <h5 href="#" class="text-xl-left text-lg-left text-md-left text-center">
                        <b>{{user.displayName}}</b>
                      </h5>
                      <p class="text-muted text-xl-left text-lg-left text-md-left text-center" style="font-size: 11px; margin-top: -5px">
                        {{userPublication.creationDate | amTimeAgo}}
                        <!-- <i title="public" class="fa fa-globe" aria-hidden="true"></i>
                        <i class="fa fa-lock" aria-hidden="true"></i> -->
                      </p>


                      <p style="text-align: justify; margin-top: 6px">{{userPublication.message}}</p>

                      <div *ngIf="userPublication.filePublication.length > 0">

                          <div class="row">
  
                            <div *ngFor="let p of userPublication.filePublication" class="col-sm-6" style="margin: 0px; padding: 0px; margin-right: -50px; margin-bottom: -4%">
  
                              <img onclick="$('#myModal1').modal('show')" (click)="PublicationClick(p.type,p.url)" style="cursor: pointer; border-radius: 8px"
                                src="{{p.url}}" height="80%" width="80%" *ngIf="p.type.includes('image')">
  
                              <video style="cursor: pointer" width="80%" height="80%" controls *ngIf="p.type.includes('video')" onclick="$('#myModal1').modal('show')"
                                (click)="PublicationClick(p.type,p.url)">
                                <source src="{{p.url}}" type="video/mp4">
  
                              </video>
  
                            </div>
  
                          </div><br>
                          
                        </div>

                    </div>

                  </div>
                </div>

              </div>

              <div class="row justify-content-center" *ngIf="finished" style="margin-top: -10px">
                <img src="https://www.pongomilogo.es/skin/frontend/default/em0060/images/ksi/topmegamenu/spinner.1429027063.gif" alt="">
              </div>

            </div>
            <br>
          </div>
        </div>
      </div>
      <div infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="1000" (scrolled)="onScroll()"></div>

      <br>

      <div class="card">
        <div class="card-header">
          Publicaciones de las personas que sige
        </div>
        <br>

        <!-- este es el nuevo -->
        <div class="container">
          <div *ngIf="listPublicationFollowers?.length == 0" style="color: gray">Aún no sigues a nadie, o el usuario al que sigues no tiene publicaciones.
            <br>
            <br>
          </div>
          <div>
            <div class="card">
              <div class="row" style="margin: 10px"></div>
            </div>
            <br>
          </div>
        </div>

      </div>
      <br>

    </div>
    <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
      <div class="card">
        <div class="card-block">
          <div style="text-align: center">
            <img class="d-flex align-self-center mr-3" src="{{user.avatar}}" class="rounded-circle" style="width: 100px; border: 2px solid #D8D8D8">
            <br>
            <b>{{user.displayName}}</b>
            <br>
            <span class="badge badge-pill badge-success">Disponible</span>
            <div class="row">
              <div class="col-xl-3 col-lg-3 col-md-6 col-6 font10">
                Siguiendo
                <br>0
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-6  font10">
                Seguidores
                <br>0
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-6 font10">
                Publicaciones
                <br>{{listPublications?.length}}
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-6 font10">
                Me gustas
                <br>0
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
    </div>
  </div>
</div>
<br>
<br>
<button id="resetScroll" style="display: none" onclick="$(body).scrollTop(0)">Reset Scroll</button>